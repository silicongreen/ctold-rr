<% if @connect_exam_obj.result_type.to_i == 1 or  @connect_exam_obj.result_type.to_i == 2 or  @connect_exam_obj.result_type.to_i == 10 or  @connect_exam_obj.result_type.to_i == 4 or  @connect_exam_obj.result_type.to_i == 7  %>
  <%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 8 or @connect_exam_obj.result_type.to_i == 9 or @connect_exam_obj.result_type.to_i == 11  %>
  <%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks2" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 12 or @connect_exam_obj.result_type.to_i == 13 %>
    <%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
        @exam_type_course = 1
        @course_name = @batch.course.course_name
        if @course_name == "Grade 1" or @course_name == "Grade 2"
          @exam_type_course = 2
        end
        if @course_name == "Grade 9" or @course_name == "Grade 10" or @course_name == "Grade 11" or @course_name == "Grade 12"
          @exam_type_course = 3
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks3" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 14 %>
<%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks14" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 15 %>
<%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks14" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 16 %>
<%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks16" %>
<% end %>
<% if @connect_exam_obj.result_type.to_i == 17 %>
<%
      if @tabulation_data.blank?
        student_response = get_tabulation_connect_exam(@connect_exam_obj.id,@batch.id,false)
        @tabulation_data = []
        if student_response['status']['code'].to_i == 200
          @tabulation_data = student_response['data']
        end
      end
  %>
  <%= render  :partial=>"/connect_exam/south_point/highest_marks17" %>
<% end %>
<% if !@exam_comment.blank? %>
  <% split_comments = @exam_comment.comments.split("[]") %>
  <% abort(split_comments.inspect) %>
  <% if @connect_exam_obj.total_working_days > 0 %>
     <% @report_data['total'] = @connect_exam_obj.total_working_days %>
     <% unless split_comments[1].blank? %>
          <% @exam_comment.comments = split_comments[0] %>
          <% @report_data['total_new_std'] = "" %>
          <% @report_data['present'] = split_comments[1] %>
          <% @report_data['absent'] = @report_data['total'].to_i - @report_data['present'].to_i %>
     <% end %>
      
  <% end %>
<% end %>

<% if ((!@report_data['total_first_term'].blank? && @report_data['total_first_term'] == 1) ||  @report_data['total_first_term'].blank?) && (@connect_exam_obj.result_type.to_s == "1" or @connect_exam_obj.result_type.to_s == "17")%>
<%

  if @first_term_connect_exam_main.blank?
    @first_term_connect_exam_main = ExamConnect.find_by_batch_id_and_is_deleted_and_result_type(@batch.id,false,14)
  end
  if @first_term_connect_exam_main.blank?
    @first_term_connect_exam_main = ExamConnect.find_by_batch_id_and_is_deleted_and_result_type(@batch.id,false,1)
  end 
  if @first_term_connect_exam_main.blank?
    @first_term_connect_exam_main = ExamConnect.find_by_batch_id_and_is_deleted_and_result_type(@batch.id,false,15)
  end 
  unless @first_term_connect_exam_main.blank?
    @report_data['total_first_term'] = @first_term_connect_exam_main.total_working_days
    @exam_comments_first_term = ExamConnectComment.find_by_exam_connect_id_and_student_id(@first_term_connect_exam_main.id,@student.id)
    unless @exam_comments_first_term.blank?
        all_comments_array = @exam_comments_first_term.comments.split("|")
        if !all_comments_array[1].nil?
          @report_data['total_new_std_first_term'] = ""
          @report_data['present_first_term'] = all_comments_array[1].to_i
          
          @report_data['absent_first_term'] = @report_data['total_first_term'].to_i - all_comments_array[1].to_i
        end  
    end
  end
%>

<% end %>

<%= render  :partial=>"/connect_exam/south_point/group_report_pdf_type_"+@connect_exam_obj.result_type.to_s %>
<style>
    #pdf-header-south table td.name-td h5.step-1, #pdf-header-south table td.name-td h5.step-2
    {
        float:left;
        margin-top:-2px; 
    }
    
</style> 