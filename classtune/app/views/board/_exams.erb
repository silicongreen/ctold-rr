<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css"/>
<% unless @exams.blank? %>
  <table id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
          <tr>
              <th><%= "Name" %></th>
              <th><%= "Session" %></th>
              <th><%= "Group" %></th>
              <th><%= "Center" %></th>
              <th><%= "Passing Year" %></th>
              <th><%= "Subject" %></th>
              <th><%= "Student" %></th>
              <th><%= "Processed" %></th>
              <th style="text-align: center;"><%= "Actions" %></th>
          </tr>
      </thead>
      <tbody>
          <% @exams.each do |exam| %>
            <tr class="tr-<%= cycle('odd', 'even') %>" id="exam-id-<%= exam.id %>">
                <td> <%= exam.board_exam_name.name %></td>
                <td> <%= exam.board_session.name %></td>
                <td> <%= exam.board_exam_group.name %></td>
                <td> <%= exam.center %></td>
                <td> <%= exam.passing_year %></td>
                <td> <%= exam.number_of_students %></td>
                <td> <%= exam.number_of_subjects %></td>
                <td> <%= (exam.is_published == 1)?"Yes":"No" %></td>
                <td style="white-space: nowrap; ">
                    <%= link_to_remote "<i class='fa fa-pencil'></i>Edit", :url => {:action => "edit_exam",:id=>exam.id,:page=>params[:page]} %>&nbsp;
                    <% if exam.number_of_students.to_i == 0 and exam.number_of_subjects.to_i == 0 %>
                      <%= link_to_remote "<i class='fa fa-trash'></i> #{t('delete_text')}", :url => {:action => "delete_exam", :id=>exam.id,:page=>params[:page]}, :confirm => "#{t('delete_confirm_msg')}" %>&nbsp;
                    <% end %>
                    <%= link_to "<i class='fa fa-address-book'></i> Students",{:action => "exam_students",:id=>exam.id,:page=>params[:page]} %>&nbsp;
                    <%= link_to "<i class='fa fa-book'></i> Subjects",{:action => "exam_subjects",:id=>exam.id,:page=>params[:page]} %>&nbsp;
                    <% if exam.number_of_students.to_i > 0 and exam.number_of_subjects.to_i > 0 %>
                      <%= image_tag("loader.gif", :align => "absmiddle", :border => 0, :id => "loading", :style =>"display: none;" ) %>
                      <%= link_to_remote "<i class='fa fa-gear fa-spin'></i> Process", :url => {:action => "exam_process", :id=>exam.id,:page=>params[:page]},:before=>"$('loading').show();",:complete=>"$('loading').hide();", :confirm => "Please check all grade before process result." %>
                    <% end %>  

                </td>
            </tr>
          <% end %>
      </tbody>
  </table>    
  <div class="pagination_div"><div class="div1"><%= will_paginate @exams,:params => {:action=> "exam"}, :previous_label=>"<", :next_label=>">", :renderer => 'RemoteLinkRenderer', :remote=>{:update=>'exams'} %></div><div class="div2"></div></div>
        <% else %>
  <p>No Exam Found<p>
    <% end %> 
      
 <style>
    *, *::before, *::after
    {
       box-sizing: initial;
    }
    tbody tr td a
    {
      font-weight:normal !important;
    }
    .row
    {
       margin-left: 0px;
    }
</style>

