<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('transportation_details') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('view_details') %></div>
<div id="inner-tab-menu">
  <ul>
    <li class='themed_bg themed-dark-hover-background'><%= link_to "Transport Attendance", :controller => "transport",:action =>"transport_attendance"  %></li>
  </ul>
</div>
</div>
<div id="page-yield">

  <% unless flash[:notice].nil? %>
    <p class="flash-msg"> <%= flash[:notice] %> </p>
  <% end %>

  <div class="label-field-pair" style="position: relative;margin-bottom:5px;">
    <label for="duedate">Start Date</label>
    <div  class="text-input-bg">
      <%= calendar_date_select_tag "attandence_date",I18n.l(@date_today,:format=>"%d %b %Y"),
        :class=>"text-input-bg",:onchange =>"j('#transport_attendance').html( '' );j('#transport_vehicle_id').trigger('change');" ,:readonly=>true,:popup=>:force%>
    </div>
   
  </div>
  <div class="label-field-pair" style="position: relative;margin-bottom:5px;">
    <label for="duedate">End Date</label>
    <div  class="text-input-bg">
      <%= calendar_date_select_tag "attandence_date_end",I18n.l(@date_today,:format=>"%d %b %Y"),
        :class=>"text-input-bg",:onchange =>"j('#transport_attendance').html( '' );j('#transport_vehicle_id').trigger('change');" ,:readonly=>true,:popup=>:force%>
    </div>
   
  </div>
   <div class="label-field-pair" style="float:left; clear:both; width:80%; margin-bottom:5px;">
    <label for="student-detail-select-class"><%= t('select_a_vehicle') %></label>
    <div class="text-input-bg"><%= select :transport , :pickup,
        [["Pickup",1],["Drop",2]],
        {},
        {:onChange => "j('#transport_attendance').html( '' );j('#transport_vehicle_id').trigger('change');"} %>
    </div>
  </div>
  <div class="label-field-pair" style="float:left; clear:both; width:80%; margin-bottom:5px;">
    <label for="student-detail-select-class"><%= t('select_a_vehicle') %></label>
    <div class="text-input-bg"><%= select :transport , :vehicle_id,
        @vehicles.map{|r| [r.vehicle_no,r.id]},
        {:prompt => "#{t('select_vehicle')}"},
        {:onChange => "#{remote_function(:url => {:action => "ajax_transport_attendance_report"},
        :with => "'id='+ value+'&attandence_date='+$('attandence_date').value+'&attandence_date_end='+$('attandence_date_end').value+'&transport_pickup='+$('transport_pickup').value",
        :before => "Element.show('loader')",
        :success => "Element.hide('loader')"
        )}"} %>
    </div>
    <%= image_tag("loader.gif",
      :align => "absmiddle",
      :border => 0,
      :id => "loader",
      :style =>"display: none;" ) %>
  </div>
   
  <div class="extender"></div>
  <div id="transport_attendance"> </div>

</div>
<style>
  .calendar_date_select_popup_icon {
    cursor: pointer;
    display: inline-block;
    margin-left: 10px;
    padding-top: 10px;
    position: absolute;
    top: 7px;
    right: -40px;
    border-left: none !important;
    padding: 8px;
}
div.text-input-bg {
    background: none repeat scroll 0 0 transparent;
    float: left;
    height: 28px;
    width: 66% !important;
}
.present_student
    {
       width: 50px;
       height: 50px;
    }
    table.table-striped tr td
    {
       font-size: 28px;
    }
</style>

<% if @vehicles.size == 1 %>
  <script>
   var jj = jQuery.noConflict();
   jj(document).ready(function () {
      jj('#transport_vehicle_id option:nth-child(2)').attr("selected", "selected");
      j('#transport_vehicle_id').trigger('change');
   });
  </script>
<% end %>
