<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>

<% unless @students.empty? %>
 <table  id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
          <tr>
              <th><%= "Id" %></th>
              <th><%= "Name" %></th>
              <th><%= "Class" %></th>
              <th><%= "Version" %></th>
              <th><%= "Category" %></th>
              <th><%= "Reg Id" %></th>
              <th><%= "Roll" %></th>
              <th><%= "Type" %></th>
              <th class="no-sort"><%= "" %></th>
          </tr>
      </thead>
      <tbody>
      <% @students.each do |student| %>
        <%
        std_info = get_student_all_type(student.student_id)
        if std_info.blank?
        next
          end
        batch_full = student.batch.full_name
        batch_split = batch_full.split(" ")
        version = batch_split[1]
        batch_full_name = student.batch.course_name+" "+student.batch.section_name
        unless @assign_students.blank? 
          subject_student = @assign_students.select{|val| val.board_exam_student_id == student.id}
        end
        
      %>
        <tr  class="tr-<%= cycle('odd', 'even') %>" id="student-<%= student.id %>">
            <td> <%= std_info.admission_no %></td>
            <td class="no-warp"> <%= std_info.full_name %></td>
            <td> <%= batch_full_name %></td>
            <td> <%= version %></td>
            <td> <%= std_info.student_category.name unless std_info.student_category.blank? %></td>
      
            <td> <%= student.registration %></td>
            <td> <%= student.roll %></td>
            <td> <%= subject_student[0].subject_taken_as unless subject_student.blank? %></td>
            <td style="text-align:left">
                <% if subject_student.blank?  %>
                <%= link_to_remote("Assign",
                  :url => { :controller=>"board",:action => 'assign_to_subject', :id =>student.id,:id2=>@subject.id},
                  :method => 'get' ) %>
                <% else %>
                <%= link_to_remote("Unassign",
                  :url => { :controller=>"board",:action => 'unassign_student', :id =>student.id,:id2=>@subject.id},
                  :confirm => "Do you realy want to unassign this student?") %>
                <% end %>
            </td>

        </tr>
      <% end %>
      </tbody>   
  </table>
<% else %>
  <p style="padding: 7px; text-align: center; background: #eef2fd;">No Student Found For This Exam</p>
<% end %>

<style>
    #category-list .listodd,#category-list .listeven
    {
        padding:10px 10px 5px 10px;
    }
    .opt a
    {
        cursor: pointer;
    }
    .no-sort::after { display: none!important; }

.no-sort { pointer-events: none!important; cursor: default!important; }
  *, *::before, *::after
    {
       box-sizing: initial;
    }
    tbody tr td a
    {
      font-weight:normal !important;
    }
</style>
<script>
  var jj = jQuery.noConflict();
  jj(document).ready(function () {
    jj('#example').dataTable( {
    "paging": false
} );
  });
</script>  


