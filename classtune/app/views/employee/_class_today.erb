<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<% unless @subjects.blank? %>
<div class="row" style="width:50%">
    <div class="row_label" >
      <div>
        Select date
      </div>
    </div>
    <div class="row_data">
      <div>
        <%= calendar_date_select_tag "select_date",I18n.l(@date_today,:format=>"%d %b %Y"), :readonly=> true,:onchange => "#{remote_function(
      :url => { :action => 'class_today' },
      :with => "'employee_id="+@employee.id.to_s+"&date_report='+value",
      :before => "Element.show('loader')",
      :success => "Element.hide('loader')"  )}", :popup=>:force, :placeholder => '', :image => '/images/icons/calendar/calendar-icon.png' %>
      </div>
    </div>
  </div>
<table width="700">
  <tr class="even">
    <td>Class</td>
    <td>Subject</td>
    <td>Start Time</td>
    <td>Attendance Taken</td>
  </tr>  
  <% @subjects.each do |sub| %>
  <tr class="odd">
    <td><%= sub.batch.full_name %></td>
    <td><%= sub.name %></td>
    <% entry = @entries.find{|val| val.subject_id.to_i == sub.id.to_i }%>
    
    <td><%= entry.class_timing.start_time.strftime("%I:%M %p") unless entry.blank? %></td>
    <% attendance = @attenadnce_register.find{|val| val.subject_id.to_i == sub.id.to_i }%>
    <td><%= "Yes" unless attendance.blank? %></td>
  </tr>
  <% end %>


</table>
<% else %>

<table width="700">
  <tr class="even">
    <td>No Class Today</td>
  </tr>

</table>
<% end %>  