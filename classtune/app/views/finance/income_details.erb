<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('income') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('income_list') %></div>
<div id="inner-tab-menu">
  <ul>
    <li class='themed_bg themed-dark-hover-background'><%= link_to "#{t('pdf_report')}",
        {:controller => "finance", :action => "income_details_pdf", :start_date => @start_date, :end_date=>@end_date,:id => @income_category.id},:target => '_blank' %></li>
  </ul>
</div>
<% unless @incomes.empty? %>
</div>
  <div id="page-yield">
    <div class="bread_crumb">

      <%= link_to t('finance_text'), :controller => "finance", :action=>"index" %><div class = "bread-crumb-separator"> > </div>
      <%= link_to "#{t('finance_reports')}", :controller => "finance", :action => "finance_reports" %><div class = "bread-crumb-separator"> > </div>
      <%= link_to "#{t('monthly_transactions')}", :controller => "finance", :action => "monthly_report" %> <div class = "bread-crumb-separator"> > </div>
      <%= link_to "#{t('finance_transactions_view')}", :controller => "finance", :action => "update_monthly_report", :start_date=>@start_date, :end_date=>@end_date %> <div class = "bread-crumb-separator"> > </div>

      <%= @income_category.name %>
    </div>
    <table class="table table-striped table-bordered" id="example" cellspacing="0" cellpadding="0" border="0" style="width: 98%;">
      <thead><!-- class="thead-inverse" -->
        <tr>
          <th class="name"><%= t('name') %></th>
          <th class="description"><%= t('description') %></th>
          <th class="amount"><%= t('amount') %></th>
          <th class="transaction_date"><%= t('transaction_date') %></th>
          <th class="transaction_date"><%= t('receipt_no') %></th>
        </tr>
      </thead>
      <tbody>
      <% @incomes.each do |i| %>
        <tr class="<%= cycle('odd','even') %>">
          <td class="name"><%= i.title %></td>
          <td class="description"><%= i.description %></td>
          <td class="amount">
            <%= (i.master_transaction_id == 0 and i.category.is_income == true) ?  precision_label(i.amount) : "-#{precision_label(i.amount)}" %>
          </td>
          <td class="transaction_date"><%= i.transaction_date.strftime("%d-%m-%y") %></td>
          <td class="receipt_no"><%= i.receipt_no %></td>
        </tr>
      <% end %>
      </tbody>  
    </table>
  </div>
<% else %>
  <table class="table table-striped table-bordered" id="example" cellspacing="0" cellpadding="0" border="0" style="width: 98%;">
    <thead><!-- class="thead-inverse" -->
      <tr>
        <th class="name"><%= t('name') %></th>
        <th class="description"><%= t('description') %></th>
        <th class="amount"><%= t('amount') %></th>
        <th class="transaction_date"><%= t('transaction_date') %></th>
        <th class="transaction_date"><%= t('receipt_no') %></th>
      </tr>
    </thead>
    <tbody>
        <tr><td colspan="5"><%= t('no_transaction_for_the_given_period') %></td></tr>
    </tbody>
  </table>
<% end %>
