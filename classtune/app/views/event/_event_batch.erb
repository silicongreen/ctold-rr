<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>


<div class="course-select">
  <% unless @batch_events.empty? %>
    <span class="title"><%= "#{t('batch_associated')}" %>:</span>
    <div>
      <ul id="category-list">
        <% batches = Batch.find(:all, :conditions => ["id IN (?)", @batch_events.map{|be| be.batch_id}]) %>
        <% batches.each do |batch| %>
            
              <li class="list<%= cycle('odd','even') %>" >
                <div class="category-name"><%= batch.name.to_s.strip.downcase == 'general' ? '' : batch.name.to_s %>
              
                  <% t_batch = Batch.find(batch.id) %>  
                  <% unless t_batch.section_name.nil? %>  
                    <% unless t_batch.section_name.blank? %>  
                      <% if t_batch.section_name.strip.length > 0 %>
                        <%=  t_batch.course_section_name %></div>
                      <% else %>
                         <%=  t_batch.course_name %></div>
                      <% end %>
                    <% else %>
                       <%=  t_batch.course_name %></div>
                    <% end %>
                  <% else %>
                     <%=  t_batch.course_name %></div>
                  <% end %>
                  <div class="category-edit"><%= link_to "#{t('remove')}", {:controller=>"event",:action=>"remove_batch", :id=>batch.id},:confirm => "#{t('delete_confirm_msg')}" %></div>
                </li>
             
        <% end %>
      </ul>
    </div>
    <%= link_to_remote "#{t('select_more_batch')}", :url=>{:controller=>"event", :action=>"select_course", :id=>params[:id]},:loading => "$('loader').show();", :loaded => "$('loader').hide();", :html=>{:class=>"themed_text"} %>
  <% else %>
    <span class="title"><%= t('no_batch_selected') %>:</span>
    <%= link_to_remote "#{t('select_a_batch')}", :url=>{:controller=>"event", :action=>"select_course", :id=>params[:id]},:loading => "$('loader').show();", :loaded => "$('loader').hide();", :html=>{:class=>"themed_text"} %>
  <% end %>
  <%= image_tag("loader.gif",
    :align => "absmiddle",
    :border => 0,
    :id => "loader",
    :style =>"display: none;" ) %>
</div>

