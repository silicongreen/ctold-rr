<% form_for :transport,  :url=>{:action => 'add_transport_all', :user=>'student' } do |f|  %>
<table class="table table-striped table-bordered" id="example" cellspacing="0" cellpadding="0" border="0" style="width: 100%;">
  <% if @students.blank? %>
    <tr class="tr-<%= cycle('odd', 'even')%>">
      <td class ="col-1"><div><%= t('no_users') %></div></td>
    </tr>
  <% else %>
    <thead><!-- class="thead-inverse" -->
      <tr>
        <td style="vertical-align: middle; text-align: center; font-size: 12px; font-family: verdana; font-weight: bold;">
          <i class="fa fa-check-square-o transport_chk_all" style="font-size: 20px; color: #000; "></i>      
          <%#= link_to_function "#{t('all')}", "$$('input.right').each(function(checkbox) { checkbox.checked = true; });" ,:class=>"themed_text"%>
          <%#= link_to_function "#{t('none')}", "$$('input.right').each(function(checkbox) { checkbox.checked = false; });" ,:class=>"themed_text" %>
        </td>
        <td class="col-2" style="font-size: 12px; font-family: verdana; font-weight: bold;"><%= t('student_name') %></td>
        <td style="font-size: 12px; font-family: verdana; font-weight: bold; text-align: center;"><%= t('route') %></td>
        <td style="font-size: 12px; font-family: verdana; font-weight: bold; text-align: center;"><%= t('vehicle') %></td>
        <td style="font-size: 12px; font-family: verdana; font-weight: bold; text-align: center;"><%= t('fare') %></td>
        <td></td>
      </tr>
    </thead>
    <tbody>
    <% no_transport = 0 %>    
    <% @students.each_with_index do |r, i| %>
      <tr id="transport_<%= r.id %>_<%= r.transport.id %>" class="tr-<%= cycle('odd', 'even')%>">
        <td style="vertical-align: middle; text-align: center;">
          <i id="<%= r.id %>" class="fa fa-check-square-o transport_chk" style="font-size: 20px; color: #000; "></i>  
          <%= check_box_tag "transportuser[user_ids][]", r.id,"",:class=>"right transport_chkbox" %>
        </td>
        <!--td class="col-1"><%#= i+1 %></td-->
        <td class="col-1" style="font-size: 12px; font-family: verdana; line-height: 15px;">
            <b><%= r.full_name %></b><hr style="border: 1px solid #ccc; margin-bottom: 10px;"/>
            <span style="padding-bottom: 10px; display: block;"><b>Student ID:</b> <%= r.admission_no %></span>
            <b>Batch: </b><%= "#{r.batch.full_name}" %>
        </td>
        <% if r.transport.nil?%>
          <%# no_transport += 1 %>    
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: center; vertical-align: middle;">-</td>
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: center; vertical-align: middle;">-</td>
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: center; vertical-align: middle;">-</td>
        <% else %>
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: center; vertical-align: middle;"><%= r.transport.route.destination %></td>
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: center; vertical-align: middle;"><%= r.transport.vehicle.vehicle_no %></td>
          <td class="col-3" style="font-size: 12px; font-family: verdana; text-align: right; vertical-align: middle; padding-right: 10px;"><%= to_comma_seperated_precision_label r.transport.bus_fare %></td>
        <% end %>
        <td class="col-4" style="text-align: center; vertical-align: middle;"> 
          <% if r.transport.nil?%>
            <%= link_to "#{t('assign')}", :controller => "transport", :action => "add_transport", :id => r.id ,:user=>'student'%><br/>
          <%else%>
            <%= link_to '<i class="fa fa-edit"></i>', {:controller => "transport", :action => "edit_transport", :id => r.transport.id}, :style => "color: #49BB4B; display: inline-block; font-size: 20px; padding-right: 6px;" %>
            <% unless r.transport.nil?%>
            <%= link_to_remote '<i class="fa fa-trash"></i>', :url => {:controller => "transport", :action => "delete_transport_single", :id => r.transport.id, :student_id => r.id}, :confirm => "Are you wish to remove this student from Transport?", :html => {:style => "color: #f00; display: inline-block; font-size: 23px;"} %><br/>  
            <% end %>
          <%end%>
        </td>
      </tr>
    <% end %>
      <% if no_transport > 0 %>
      <tr>
          <td colspan="8" class="col-1" style="text-align: center;">
            <%= f.submit "#{t('assign')}" ,:class=>"submit_button", :disable_with => "#{t('please_wait')}"%>
          </td>
      </tr>   
      <% end %>
      </tbody>
  <% end %>
</table>

<% end %>
