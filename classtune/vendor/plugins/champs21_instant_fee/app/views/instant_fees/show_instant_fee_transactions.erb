<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('instant_fees_text') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('transactions') %></div>
</div>
<div id="page-yield">

  <div class="filter_category">
    <div id="search_box_bg" style="width: 45%; float: left;">
      <div class="label-field-pair" style="width: 99%;">    
        <div class="label-container" style="text-align: right; padding-top: 4px; font-weight: bold; font-size: 16px;"><%= t('select_category') %></div>
        <div class="input-container">
         <%= select :select_category, :category, @instant_fee_categories.map { |s| [s.name, s.id] } << ["#{t('custom')}","Custom"],
          {:prompt => "#{t('select_category')}"},
          {:onChange => "#{remote_function(:url => {:action => "list_instant_fee_transactions"}, :with => "'category_id='+value",
          :before => "Element.show('loader3'); check_category(this.value);",
          :success => "Element.hide('loader3')")}"} %>
          <%= image_tag("loader.gif",
            :align => "absmiddle",
            :border => 0,
            :id => "loader3",
            :style =>"display: none;" ) %>
      </div>
    </div>
  </div>  
  <div id="search_box_bg_date" class="hide2" style="width: 53%; float: left;">
      <% remote_form_for(:date, :url => {:action=> 'instant_fee_transaction_filter_by_date',:category=>@category},:before => "Element.show('loader_date')",:success => "Element.hide('loader_date')", :html=> {:multipart=>true,:id=>"date_search_form"}) do |s| %>
      <%=hidden_field_tag :category_id,0%>
      <div class="label-field-pair" style="width: 48%; float: left;">
          <div class="label-container" style="text-align: right; padding-top: 10px; font-weight: bold; font-size: 16px;">
              Start
          </div>
          <div class="input-container calendar-input">
              <%= calendar_date_select_tag 's_date', I18n.l(@start_date.present? ? @start_date.to_date : Date.today , :format=> :default),
                  :year_range => 15.years.ago..5.years.from_now, :readonly=>true, :popup=>"force", :onChange => ""%>
          </div>
      </div>
      <div class="label-field-pair" style="width: 46%; float: left; padding-left: 2%;">
          <div class="label-container" style="text-align: right; padding-top: 10px; font-weight: bold; font-size: 16px;">
              End
          </div>
          <div class="input-container calendar-input">
              <%= calendar_date_select_tag 'e_date', I18n.l(@end_date.present? ? @end_date.to_date : Date.today , :format=> :default),
        :year_range => 15.years.ago..5.years.from_now, :readonly=>true, :popup=>"force", :onChange => "date();"%>
          </div>
      </div>
      <%end%>
  </div>    
      <div style="clear: both; height: 10px;"></div>    
  <div id="show_transactions">

  </div>
</div>
</div>
<script>
  function check_category(val)
  {
      if ( val != "" )
      {
        j('#category_id').val(j('#select_category_category').val()); 
        j('#search_box_bg_date').removeClass('hide2');
      }
      else
      {
          j('#search_box_bg_date').addClass('hide2');
      }
  }
  
  function date()
  {
      $$('#date_search_form')[0].request();
  }
</script>
