<% if @classes.length == 1 %>
<script type="text/javascript">
  j("#sections_div").hide();
  j.ajax({
    type: "POST",
    url: "/attendance_reports/mode",
    data: j('#student_batch_name').serialize() + "&subject_id=&course_id=" + <%= @classes[0].id  %>
  })
  .done(function( msg ) {
    j("#sections_div").hide();
  });
</script>  
<% else %>
<script type="text/javascript">
  j("#sections_div").show();
  $('mode').update(''); 
  $('month').update(''); 
  $('report').update('');
</script>
<% if @selected_section.to_i > 0 %>
<%= select :student, :section, options_for_select(@classes.map { |c| [c.section_name.strip.length > 0 ? c.section_name.strip : "no-section", c.id] }, @selected_section.to_i),
    {:prompt => "#{t('select')}"},
    {:onchange => "#{remote_function(
          :url => {:controller => "attendance_reports", :action => 'mode' },
          :with => "'subject_id='+'&course_id='+value+'&'+$('student_batch_name').serialize()",
          :before => "Element.show('loading_1')",
          :success => "Element.hide('loading_1')"  )}"} %>  
<% else %>    
<%= select :student, :section, options_for_select(@classes.map { |c| [c.section_name.strip.length > 0 ? c.section_name.strip : "no-section", c.id] }, @selected_section.to_i),
    {:prompt => "#{t('select')}"},
    {:onchange => "#{remote_function(
          :url => {:controller => "attendance_reports",:action => 'mode' },
          :with => "'subject_id='+'&course_id='+value+'&'+$('student_batch_name').serialize()",
          :before => "Element.show('loading_1')",
          :success => "Element.hide('loading_1')"  )}"} %>  
<% end %>
<%= image_tag("loader.gif", :align => "absmiddle", :border => 0, :id => "loading_1", :style =>"display: none;" ) %>
<% end %>