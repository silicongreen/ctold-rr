
<div style="clear: both;"></div>

<div class="CSSTableGenerator" style="width: 97%;margin-top: 10px;">
   <% unless @pub_date_string.blank?  %>
  <a style="color: green;
    margin-bottom: 10px;
    float: left;
    clear: both;" href="/assignments/download_excell?batch_name=<%= @ba_id %>&student_class_name=<%= @class_id %>&student_section=<%= @std_id %>&assignment_publish_date=<%= @pub_date_string %>">Download Excell </a>
    
    
    <a style="color: green;
    margin-bottom: 10px;
    float: left; margin-left: 15px;" target="_blank" href="/assignments/download_pdf?batch_name=<%= @ba_id %>&student_class_name=<%= @class_id %>&student_section=<%= @std_id %>&assignment_publish_date=<%= @pub_date_string %>">Download PDF</a>
    
     <a style="color: green;
    margin-bottom: 10px;
    float: left; margin-left: 15px;" target="_blank" href="/assignments/download_pdf_publush_date?batch_name=<%= @ba_id %>&student_class_name=<%= @class_id %>&student_section=<%= @std_id %>&assignment_publish_date=<%= @pub_date_string %>">Download Assignment PDF</a>
   <% end %>
    
  <table id="listing table-design" align="center" width="100%" cellpadding="1" cellspacing="1">
    <% unless @assignments.empty? %>
    <tr class="tr-head">
        <thead>
      <th>
       <%= "#{t('course')}"%>
      </th>
      <th>
       <%= "#{t('subject')}"%>
      </th>
      <th>
       <%= "#{t('title')}"%>
      </th>
      <th>
        <%= "#{t('teacher_name')}"%>
      </th>
      <th>
        <%= "#{t('due_date')}"%>
      </th>
      <th>
        <%= "Assign Date"%>
      </th>
      <th>
        <%= "#{t('defaulter')}"%>
      </th>
  </thead>
    </tr>
   
      <% @assignments.each_with_index do |assignment,i| %>
        <%
          if assignment.subject.blank?
            next
          end
          if !assignment.content.index("</").nil? && !assignment.created_at.blank? && assignment.created_at < "2020-11-08 01:17:00"
            assignment.created_at = assignment.created_at.to_time + 6*60*60
          end
        %>
        <% @defaulter_registered = AssignmentDefaulterRegistration.find_by_assignment_id(assignment.id) %>
        <tr class="tr-<%= cycle('odd', 'even') %>">
          
          <td class="col-2">
            <%=  link_to assignment.subject.batch.full_name , assignment%>
          </td>
          <td class="col-2">
              <%=  link_to assignment.subject.name , assignment%>
          </td>
          <td class="col-2">
            <%=  link_to assignment.title, assignment%>
          </td>
          <td class="col-2">
            <% unless assignment.employee.blank?  %>
              <%=  assignment.employee.full_name %>
            <% end %>
          </td>
          
          <td class="col-4">
            <%= I18n.l(assignment.duedate,:format=>"%d-%m-%Y") unless assignment.duedate.blank? %>
          </td>
          <td class="col-4">
            <%= I18n.l(assignment.created_at,:format=>"%d-%m-%Y") unless assignment.created_at.blank? %>
          </td>
          
          
          <td class="col-4" style="color:red">
              <% unless @defaulter_registered.blank? %>
                   <%= link_to @defaulter_registered.assignment_not_given, { :action => 'defaulter_students', :id =>assignment.id} %>
                 
              <% else %>
                  <%= "#{t('not_regester')}" %>
              <% end %>
          </td>
          
        </tr>
      <% end %>
    <% else %>
      <tr class="tr-odd">
        <td class="col-1"><%= "#{t('no_assignments_for_this_subject_have_been_created')}"%></td>
      </tr>
    <% end %>
  </table>
</div> 
<% posted_params = params %>
<% posted_params.delete(:page) %>
<% posted_params.delete(:authenticity_token) %>
<%= will_paginate @assignments, :previous_label=>"<", :next_label=>">", :renderer => 'RemoteLinkRenderer', :params => params ,:remote => { :loading =>  "$('loader_paginate').show();",:complete =>"$('loader').hide();"  } %>
<%= image_tag("loader.gif",
          :align => "absmiddle",
          :border => 0,
          :id => "loader_paginate",
          :style =>"display: none;" ) %>

