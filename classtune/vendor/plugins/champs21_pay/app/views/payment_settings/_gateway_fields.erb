<% unless @active_gateway.nil? %> 
  <div id="<%= @active_gateway %>" style="border: 1px solid #ccc; float: left; border-radius: 6px; padding-bottom: 20px;">
    <% @gateway_fields.each do |field| %>
      <% unless field.index("is_").nil? %>
      <div class="label-field-pair label-field-pair-gateway" style="border-bottom: 1px solid #ccc; ">
        <div style="float: left; width: 65%; margin-top: -15px; margin-left: 20px;">
        <% img_width = @active_gateway == "citybank" ? "82px" : "150px" %>    
        <%= image_tag "/images/gateway_images/#{@active_gateway}.png", :style=> "width: #{img_width};" %>
        </div>
        <div class="label-field-pair" style="float:right; width: 22%; margin-top: -26px;">
            <% str = (PaymentConfiguration.config_value(field).to_i == 1) ? "checked" : "" %>
            <% is_enabled = PaymentConfiguration.config_value(field).to_i  %>
            <input type="hidden" name="is_enabled" id="is_enabled" value="<%= is_enabled  %>" />
            <input autocomplete="off" type="checkbox" name="payment_settings[<%= @active_gateway %>][<%= field %>]" id="<%= field %>" <%= str %> class="<%= field %>" style="width: 50px;"/><span style="display: block; margin-top: -19px; margin-left: 50px; font-size: 14px;"><%= t(field) %></span>
        </div>
      </div>
      <% else  %>
      <div class="label-field-pair label-field-pair-gateway label-field-pair-gateway-new" style="border-bottom: none;">
        <label for=<%= "#{t(field)}" %>><%= t(field) %></label>
        <div class="text-input-bg"><%= text_field_tag "payment_settings[#{@active_gateway}][#{field}]",PaymentConfiguration.config_value(field) %></div>
      </div>
      <% end %>
    <% end %>
  </div>
<% end %>

<script>
  j(document).ready(function(){
      j(".is_test_sslcommerz").click(function(){
          if ( j(this).prop("checked") )
          {
              j(".label-field-pair-gateway-new input").prop("disabled", true);
          }
          else
          {
              j(".label-field-pair-gateway-new input").prop("disabled", false);
          }
      });
      
      j(".is_test_testtrustbank").click(function(){
          if ( j(this).prop("checked") )
          {
              j(".label-field-pair-gateway-new input").prop("disabled", true);
          }
          else
          {
              j(".label-field-pair-gateway-new input").prop("disabled", false);
          }
      });
      
      if ( Number(j("#is_enabled").val()) == 1 )
      {
          j(".label-field-pair-gateway-new input").prop("disabled", true);
      }
  });
</script>

<style>
.label-field-pair input {
  padding: 10px;
  border-radius: 4px;
  background: #fDfDfD;
}
.label-field-pair-gateway-new label {
    padding: 20px 30px;
}
.submit-button {
    width: 100px;
    border-radius: 4px;
}
</style>