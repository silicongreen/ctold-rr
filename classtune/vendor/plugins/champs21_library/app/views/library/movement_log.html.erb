<%-#
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>
<div id="content-header">
<%= show_header_icon %>
  <h1><a href="/library" style="color:#666666; text-decoration: none;" ><%= "#{t('library_text')}"%></a></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= "#{t('book_movement_log')}"%></div>

<% unless flash[:notice].nil? %>
  <p class="flash-msg"> <%= flash[:notice] %> </p>
<% end %>
</div>
<div id="page-yield">
  <% form_remote_for :book_log ,:url=>{:action=>'movement_log'},:loading=>"$('loader').show();",:loaded=>"$('loader').hide();"  do |f| %>
    <div class="filter">
      <div class="label-field-pair">
        <label for="course_id"><%= t('select_type') %></label>
        <div class="text-input-bg margin-left-10">
          <%= f.select :type, [["#{t('issue_date')}", "#{t('issue_date')}"],["#{t('due_date')}", "#{t('due_date')}"]], {}  %>
        </div>
      </div>
    </div>
    <div class="filter1">
      <div class="label-field-pair">
        <label for="subject_type"><%= "Date Start" %></label>
        <div class="text-input-bg">
          <%= calendar_date_select_tag 'book_log[date]',"", :year_range => 5.years.ago..0.years.ago %>
        </div>
      </div>
    </div>
    <div class="filter1">
      <div class="label-field-pair">
        <label for="subject_type"><%= "Date End" %></label>
        <div class="text-input-bg">
          <%= calendar_date_select_tag 'book_log[date2]',"", :year_range => 5.years.ago..0.years.ago %>
        </div>
      </div>
    </div>
    
    <div class="filter">
      <div class="label-field-pair">
        <label for="course_id"><%= "User Type" %></label>
        <div class="text-input-bg margin-left-10">
          <%= f.select :user_type, [["Student", 1],["Employee", 0]], {}  %>
        </div>
      </div>
    </div>
    <div class="filter1" id="batch_filter">
      <div class="label-field-pair">
        <label for="subject_type"><%= "Sections" %></label>
        <div class="text-input-bg">
            <%= select :book_log, :batch, options_for_select(Batch.active.map {|b| [b.full_name, b.id]}), 
                {:prompt => "#{t('select')}"} %>
        </div>
      </div>
    </div>
    <div class="extender"></div>
    <%= submit_tag "â–º #{t('search_text')}", :class=> 'submit_button', :disable_with => "#{t('please_wait')}"  %> <%= image_tag("loader.gif",
      :align => "absmiddle",
      :border => 0,
      :id => "loader",
      :style =>"display: none;" ) %>
  <% end %>
</div>
<div class="hor_line"></div>
<div id="information">
  <%= render  :partial => 'movement_log_details'%>
</div>

<script>
  var jq = jQuery.noConflict();
  jq("#book_log_user_type").on("change",function(){
    if(jq(this).val()==1)
    {
      jq("#batch_filter").show();
    }  
    else
    {
      jq("#batch_filter").hide();
    }  
  });
  
</script>  
