<% form_for(@student, :url => {:action=> 'show'}, :html=> {:id=>'new_student'}) do |s| %>
  <% #if !@current_user.admin? and MultiSchool.current_school.code == "sfx" %>
    <% #@batches.reject!{|c| c.course.no_call.to_i == 0} %>
  <% #end %>
  <% @batches.reject!{|c| c.is_deleted == true} %>
  <div id="page-yield"  style="margin-top:0px; padding: 14px; width: 96%;"> 
      <div class="label-field-pair" style="float:left; clear:both; width:80%; margin-bottom:5px;">
        <label for="duedate">Select Date</label>
        <div  class="text-input-bg">
          <%= calendar_date_select_tag "attandence_date","",
            :class=>"text-input-bg",:onchange =>"j('#register').html( '' );j('#student_batch_id').val( '' );j('#student_batch_id').trigger('change');" ,:readonly=>true,:popup=>:force%>
        </div>
        <div class="text-input-bg" style="cursor:pointer;  font-size: 13px;
             font-weight: bold;color: #db3434;text-decoration: underline; margin-top: 11px;"  onClick="j('#attandence_date').val('');j('#end_date').val('');j('#attandence_date').trigger('change');">Clear</div>
             
       
      </div>
      <div class="label-field-pair" style="float:left; clear:both; width:80%; margin-bottom:5px;">
        <label for="duedate">End Date</label>
        <div  class="text-input-bg">
          <%= calendar_date_select_tag "end_date","",
            :class=>"text-input-bg",:onchange =>"j('#register').html( '' );j('#student_batch_id').val( '' );j('#student_batch_id').trigger('change');" ,:readonly=>true,:popup=>:force%>
        </div>
        <div class="text-input-bg" style="cursor:pointer;  font-size: 13px;
             font-weight: bold;color: #db3434;text-decoration: underline; margin-top: 11px;"  onClick="j('#end_date').val('');j('#end_date').trigger('change');">Clear</div>
             
       
      </div>
      <div class="row" style="width:45%;">  
        <div class="row_label">
          <div>
            Class And Section
          </div>
        </div>
        <div class="row_data">
          <div>
            <div class="custom_drop_wrapper">
             <%= select :student, :batch_id, options_for_select(@batches.map {|b| [b.full_name, b.id]}, @batch_no.to_i), 
              {:prompt => "#{t('select')}"},
              {:onChange => "#{remote_function(:url => {:controller => "attendances", :action => "subjects3"}, :with => "'batch_id='+value+'&date_from='+j('#attandence_date').val()+'&date_to='+j('#end_date').val()" ,:before => "$('loading_2').show();",
              :success => "$('loading_2').hide();")}"} %>
              <%= image_tag("loader.gif", :align => "absmiddle", :border => 0, :id => "loading_2", :style =>"display: none;" ) %>
                
            </div>
          </div>
        </div>
      </div>
      <div class="row" style="width:45%;">
        <div class="row_label">
          <div>
            Subject
          </div>
        </div>
        <div class="row_data">
          <div>
            <div id="subjects" class="custom_drop_wrapper">
              <%= render :partial => 'attendances/subjects3' %>
            </div>
          </div>
        </div>
      </div>
      
      <% if !@current_user.admin?  %>
      <div style="height: 60px;display: none;"></div>
        <div style="width: 100%; text-align: center;clear: both;margin-top: 20px;height: 40px;display: none; ">
        <%= link_to_remote "View Report",
        :before => "Element.show('loader2');",
        :success => "Element.hide('loader2');",
        :update => 'monthreport',
        :url => {:controller => "attendances", :action => "subjects3"}, :with => "'option=1&date_from='+j('#attandence_date').val()+'&date_to='+j('#end_date').val()",
        :html => {:class => 'button-link button-link-report',:style => "display: none; float: none;width: 11%;margin: auto;margin-top: 50px;background: #49BB4B !important;color: #fff;"}
    %>
        </div>
      <% end %>
    <%= image_tag("loader.gif", :align => "absmiddle", :border => 0, :id => "loader", :style =>"display: none;" ) %>


  <% end %>
  <%= hidden_field_tag 'time_zone_date',@date_today, :id=>'time_zone' %>
  
  <div id="register"></div>
  <div id="modal-box" style="display:none;"></div>
</div>
<style>
  
  .row_data div img.calendar_date_select_popup_icon
  {
     width:22px;
  }
  .row_data div input[type="text"] {
  font-size: 18px;
  padding: 0px 0 0px 0px;
  width: 90%;
  }
  
  .row {
  background-color: #f8f8fa;
  border: 1px solid #DFE1E2;
  float: left;
  width: 30%;
  margin-right: 28px;
  border-right: 1px solid #DFE1E2;
}
.row_label {
  background-color: #ffffff;
  border-right: 1px solid #DFE1E2;
  float: left;
  width: 48.2%;
  padding: 0px 0px;
}
.row_label div {
  color: #868A8B;
  float: left;
  padding: 8px 10px;
  width: 80%;
}
.row_data {
  float: left;
  width: 48.6%;
}
.custom_drop_wrapper select::-ms-expand {
    display: none;
}
.calendar_date_select_popup_icon
{
    margin: 10px 3px;
}
.custom_drop_wrapper select {
  background-color: transparent;
  background-image: url("/images/icons/drop_down_normal.png");
  background-position: 98% 0;
  background-repeat: no-repeat;
  background-size: 37px 36px;
  border: medium none;
  cursor: pointer;
  display: block;
  height: 35px;
  width: 100%;
  -webkit-appearance: none;
  /* border-right: 1px solid black; */
}
.CSSTableGenerator td {
    font-size: 12px;
    text-align: center;
}
.CSSTableGenerator td {
    vertical-align: middle;
    border: 1px solid #D7DBDD;
  
    padding: 10px;
    font-size: 12px;
    font-weight: normal;
    color: #333333;
}
.CSSTableGenerator td.left-align {
    text-align:left;
}

</style>  