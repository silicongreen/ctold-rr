<!--<div id="content-header">
<%#= show_header_icon %>
  <h1><%#= "#{t('assignments_text')}"%></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%#= "#{t('edit_assignment')}"%></div>
</div>-->

<div class="header-wrapper">
  <div class="header-title">
    <div class="header-icon">
      <%= image_tag '/images/icons/lessonplan_icon.png', :html => {:alt => 'Lessonplan'} %> 
    </div>
    <div class="header-title-text-wrapper">
      <div class="header-title-main-text f2">
       <%= link_to "Homework", :controller => 'assignments', :action => 'index' %> &nbsp;  |&nbsp; <%= "Edit"%>
       <span style="float: left;clear:both;font-size: 15px;"><%= Time.now.strftime("%Y-%m-%d") %></span>
      </div>
      <div class="header-title-sub-text f5">
        
        </div>
      </div>
    </div>    
<div class="clearfix"></div>
  
</div>

<div id="page-yield" class="ch_homework_answers_wrapper" style="margin-top: 0px;">

  <% unless flash[:notice].nil? %>
    <p class="flash-msg"> <%= flash[:notice] %> </p>
  <% end %>
  <% form_for @assignment , :html => { :multipart => true } do |f| %>
    <%= error_messages_for :assignment %>
    <div class="assignment_container">
      <div class="assignment_form">



        <div class="label-field-pair">
          <label  for="assignment_title"><%= "#{t('title')}"%></label>
          <div class="text-input-bg"><%= f.text_field :title %></div>
        </div>
         <% if @current_user.admin? or @current_user.employee_entry.homework_publisher == 1 %>
        <div class="label-field-pair">
          <label  for="assignment_subject"><%= "#{t('subject')}"%></label>   
          <div class="text-input-bg" >   
            <span style="font-size: 15px;margin-left:10px;"><%= "#{@subjects.name}  - #{@subjects.batch.full_name}"%></span>
            <%= hidden_field :assignment,"subject_id", :value => @subjects.id %>
          </div>
        </div>
        <% end %>
        <% if @current_user.employee?  %>
        <div class="label-field-pair">
          <label  for="assignment_subject"><%= "#{t('subject')}"%></label>    <div class="text-input-bg" >    <%= select :assignment, :subject_id,
              @subjects.map {|s| ["#{s.name}  - #{s.batch.full_name}",s.id]},
              {:prompt => "#{t('select_a_subject')}"},
              {:onChange => "#{remote_function(:url => {:action => "subjects_students_list"},
              :with => "'subject_id='+ value",
              :before => "Element.show('loader')",
              :success => "Element.hide('loader')"
              )}"} %></div>

          <%= image_tag("loader.gif",:align => "absmiddle",:border => 0,:id => "loader", :style =>"display: none;" ) %>
        </div>
        <% end %>
        <div class="label-field-pair">
            <label >Homework Type</label>
            <div  class="text-input-bg" id="exam-group-select">
                 <%= f.select :assignment_type, [['Regular',1],['Assignment',2]] %>
            </div>
        </div>
        <div class="homework_content" >
          <label class="homework_content_label" style="" ><%= "#{t('content')}"%></label>
          <div  class="homework_content_div">
                <%= f.redactor :content %>
          </div>
        </div>
        

        <div class="label-field-pair" style="float:left; clear:both;">
          <label ><%= "#{t('attach_a_file')}"%> (<%= t('max_size') %>)</label>
          <div  class="text-input-bg" id="assignment-attachment"><%= f.file_field  :attachment %></div>
        </div>
        <div class="label-field-pair" style="float:left; clear:both;">
          <label for="duedate"><%= "#{t('due_date')}"%></label>
          <div  class="text-input-bg">
            <%= calendar_date_select_tag "assignment[duedate]",I18n.l(@assignment.duedate,:format=>"%d-%m-%Y"),
              :class=>"text-input-bg",:readonly=>true,:popup=>:force%>
          </div>
        </div>
          
        <div class="label-field-pair"  style="float:left; clear:both;">
          <label for="duedate"><%= "Published date"%></label>
          <div  class="text-input-bg">
             <%= calendar_date_select_tag "assignment[created_at]",I18n.l(@assignment.created_at,:format=>"%d-%m-%Y"),
              :class=>"text-input-bg",:readonly=>true,:popup=>:force%>
          </div>
        </div>

      </div>
      <div id="subjects_student_list">
        <%= render :partial=> "subjects_student_list" ,:object=>@assignment.subject%>
      </div>
    </div>
    <div id ="assignment-submit" >
      <%= f.submit "#{t('update_assignment')}" ,:class=>"submit_button"%>
    </div>
  <% end %>
  <%= load_redactor_script %>
</div>
<%= stylesheet_link_tag 'tadded-header' %>