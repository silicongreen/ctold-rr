<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('online_payment') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('order_verification') %></div>

<div id="inner-tab-menu">
  <ul>
    <li class='themed_bg themed-dark-hover-background'><%= link_to "Settings", settings_online_payments_path %></li>
    <li class='themed_bg themed-dark-hover-background'><%= link_to "Transaction", transactions_online_payments_path %></li>
  </ul>
</div>

</div>
<div id="page-yield">
  <% unless flash[:notice].nil? %>
    <p class="flash-msg"> <%= flash[:notice] %> </p>
  <% end %>
  <% if @payment_gateway.length > 1 %>
    <div style="width: 100%; text-align: center; border: 1px solid #ccc; margin-bottom: 10px; padding: 10px 0; border-radius: 10px;">
        <%= image_tag("loader.gif",:align => "absmiddle",:border => 0,:id => "loader", :style =>"display: none;" ) %>
        <% if @payment_gateway.include?('citybank') %>
          <% @payment_gateway.each do |key| %>
              <% if key == "citybank" %>
              <div class="gateway_image_panel" data-gateway="<%= key %>" style="position: relative;">
                  <input type="radio" id="radio_<%= key %>" name="gateway_radio" <%= (@gateway == key) ? "checked" : "" %> class="gateway_radio" value="<%= key %>" style="position: absolute; top: 0; right: 4px;" autocomplete="off" />
                  <%= image_tag "/images/gateway_images/#{key}-ico.png", :class => "gateway_image", :id => "#{key}", :style => "#{key == 'citybank' ? 'height:70px;' : 'height: 65px;'}" %>
              </div>
              <% end %>
          <% end %>
        <% end %>
        <% @payment_gateway.each do |key| %>
            <% unless key == "citybank" %>
            <div class="gateway_image_panel" data-gateway="<%= key %>" style="position: relative;">
                <input type="radio" id="radio_<%= key %>" name="gateway_radio" <%= (@gateway == key) ? "checked" : "" %> class="gateway_radio" value="<%= key %>" style="position: absolute; top: 0; right: 4px;" autocomplete="off" />
                <%= image_tag "/images/gateway_images/#{key}-ico.png", :class => "gateway_image", :id => "#{key}", :style => "#{key == 'citybank' ? 'height:70px;' : 'height: 65px;'}" %>
            </div>
            <% end %>
        <% end %>
      </div>    
  <% end %>
  <div id="order_panel">
    <%= render :partial => "order_verifications"  %>
  </div>  
</div>
<%= stylesheet_link_tag 'tadded-header' %>
<%= stylesheet_link_tag 'form-bootstrap' %>
<% content_for :head do %>
  <%= javascript_include_tag "custom/tabbed-header" %>
<% end %> 

<style>
    .gateway_image_panel{
      /*border: 1px solid #ccc;*/
      border-radius: 5px;
      margin-right: 5px;
      display: inline-block;
      /*-webkit-box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);
      -moz-box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);
      box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);*/
      cursor: pointer;
    }
    .gateway_image{
      height: 65px;
      /*width: 100%;
      -webkit-box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);
      -moz-box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);
      box-shadow: 5px 6px 6px -3px rgba(0,0,0,0.42);*/
      cursor: pointer;
    }
</style>
<script>
  j(document).ready(function(){
      j(document).on("click", ".gateway_image_panel", function(){
          var gateway = j(this).data('gateway');
          j("#radio_" + gateway).prop('checked', true);
          new Ajax.Request('/online_payments/order_verifications_partials',
                  {
                      before: $('loader').show(),
                      asynchronous: true,
                      evalScripts: true,
                      parameters: 'gateway=' + gateway
                  }
          )
      });
  });
</script>