<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>
<div id="page-yield" class="available_sections1 baf_shaheen">
    <div class="page1"> </div>
    <div class="section1 row" >
        <center>
            <h4 align="center">Summary Report</h4>
            <h4 align="center"><%= @connect_exam_obj.name %> - <%= @connect_exam_obj.published_date.blank? ? @connect_exam_obj.created_at.strftime("%Y"):@connect_exam_obj.published_date.strftime("%Y") %>-<%= @connect_exam_obj.published_date.blank? ? @connect_exam_obj.created_at.strftime("%Y").to_i+1:@connect_exam_obj.published_date.strftime("%Y").to_i+1 %></h4>
            
            <table id="pdf-table" width="100%" cellspacing="0">
              <tr class="table-header">
                      <td class="col-pdf">Program : <%= @batch.course.course_name %></td>
                      <td class="col-pdf">Group : <% unless @group_name_upper.blank? %><%= @group_name_upper %><% end %></td>
                      <td class="col-pdf">Section : <%= @batch.course.section_name %></td>
              </tr>
              <% batch_split = @batch.name.split(" ") %>
              <tr class="table-header">
                      <td class="col-pdf">Shift : <%= batch_split[0] %></td>
                      <td class="col-pdf">Version : <%= batch_split[1] %></td>
                      <td class="col-pdf">Session : <%= @connect_exam_obj.published_date.blank? ? @connect_exam_obj.created_at.strftime("%Y"):@connect_exam_obj.published_date.strftime("%Y") %>-<%= @connect_exam_obj.published_date.blank? ? @connect_exam_obj.created_at.strftime("%Y").to_i+1:@connect_exam_obj.published_date.strftime("%Y").to_i+1 %></td>
              </tr>
            </table>
            
              <h4 align="center">Summary</h4>
              <% if !@total_std_batch.blank? %>
              <table id="pdf-table" width="60%" align="center" cellspacing="0">
                      <tr class="table-header">
                        <td class="col-pdf" >Total No. of Students </td><td><%= @total_std_batch %> </td>
                      </tr>
                      <tr class="table-header">
                        <td class="col-pdf" >Absent in all Subjects </td><td><%= @absent_in_all_subject %> </td>
                      </tr>
                      <tr class="table-header border-top">
                        <td class="col-pdf" >Total No. of Examinees </td><td><%= @total_std_batch-@absent_in_all_subject %> </td>
                      </tr>
                  </tr> 
              </table>     
              <% end %>
              <h4 align="center">Passed/ Failed</h4>
              <% if !@student_list_first_term.blank? %>
              <table id="pdf-table" width="60%" align="center" cellspacing="0">
                      <tr class="table-header">
                        <td class="col-pdf" >No. of Passed Students </td><td><%= @student_list_first_term_batch.count %> </td>
                      </tr>
                      <tr class="table-header">
                        <td class="col-pdf" >No. of Failed with Partial Absentee Students </td><td><%= @total_std_batch-@student_list_first_term_batch.count-@absent_in_all_subject %> </td>
                      </tr>
                      <tr class="table-header border-top">
                        <td class="col-pdf" ></td><td><%= @total_std_batch-@absent_in_all_subject %> </td>
                      </tr>
                  </tr> 
              </table>     
              <% end %>
              
              <% if @grading_levels.blank? %>
                <% @grading_levels = GradingLevel.for_batch(@batch.id) %>
                <% if @grading_levels.blank? %>
                  <% @grading_levels = GradingLevel.default %>
                <% end %>
              <% end %>
              <% if !@grade_count.blank? %>
              
              <h4 align="center">Passed Student(s)</h4>
              <table id="pdf-table" width="60%" align="center" cellspacing="0">
                      <% total_got = 0 %>
                      <% @grading_levels.each do |grade| %>
                      
                      <% if grade.name != "F" %>
                        <% unless @grade_count[grade.name].blank?  %>
                          <tr class="table-header">
                            <td class="col-pdf" >No. of Student(s) got <%= grade.name %> </td><td><%= @grade_count[grade.name] %> <% total_got = total_got+@grade_count[grade.name].to_i %> </td>
                          </tr>
                        <% end %>
                      <% end %>
                      <% end %>
                      <tr class="table-header border-top">
                        <td class="col-pdf" ></td><td><%= total_got %> </td>
                      </tr>
                  </tr> 
              </table>     
              <% end %>
              <% if !@failed_partial_absent.blank? %>
              <% @failed_partial_absent.keys.sort.each { |key| puts @failed_partial_absent[key] } %>
              <h4 align="center">Failed With Partial Absentee Student(s)</h4>
              <table id="pdf-table" width="60%" align="center" cellspacing="0">
                      <% total_got = 0 %>
                      <% @failed_partial_absent.each do |key,ft| %>
                          <tr class="table-header">
                            <td class="col-pdf" >No. of Student(s) failed in <%= key %> Subjects </td><td><%= @failed_partial_absent[key] %> <% total_got = total_got+@grade_count[grade.name].to_i %> </td>
                          </tr>
                      <% end %>
                      <tr class="table-header border-top">
                        <td class="col-pdf" ></td><td><%= total_got %> </td>
                      </tr>
                  </tr> 
              </table>     
              <% end %>
              <% if !@failed_appeared_absent.blank? %>
              <% @failed_appeared_absent.keys.sort.each { |key| puts @failed_appeared_absent[key] } %>
              <h4 align="center">Failed List only Appeared in Exam</h4>
              <table id="pdf-table" width="60%" align="center" cellspacing="0">
                      <% total_got = 0 %>
                      <% @failed_appeared_absent.each do |key,ft| %>
                          <tr class="table-header">
                            <td class="col-pdf" >No. of Student(s) failed in <%= key %> Subjects </td><td><%= @failed_partial_absent[key] %> <% total_got = total_got+@grade_count[grade.name].to_i %> </td>
                          </tr>
                      <% end %>
                      <tr class="table-header border-top">
                        <td class="col-pdf" ></td><td><%= total_got %> </td>
                      </tr>
                  </tr> 
              </table>     
              <% end %>
        </center>
    </div>
</div>

<style>
    .baf_shaheen table#pdf-table tr.table-header td.name-left
    {
        text-align: left !important;
    }
</style>    
