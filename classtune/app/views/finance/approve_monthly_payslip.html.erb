<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery-ui.min.js" type="text/javascript"></script>

<script>
  $jq = jQuery.noConflict();
  $jq(document).ready(function() {
    $jq("#salary_date").datepicker({dateFormat: 'yy-mm-dd'});
  });
</script>

<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('payslip_text') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('approve_payslip') %></div>
</div>
<div id="page-yield">
  <div class="bread_crumb">
    <%= link_to t('finance_text'), :controller => "finance", :action=>"index" %> <div class = "bread-crumb-separator"> > </div>
    <%= link_to "#{t('payslip_text')}", :controller => "finance", :action => "payslip_index" %> <div class = "bread-crumb-separator"> > </div>
    <%= t('aprove_monthly_payslip') %>
  </div>
  <div class="box">
    <div class="label-field-pair">
      <div class="label-container"><label for="salary_date"><%= t('salary_month') %>
      <%= image_tag("loader.gif",
              :align => "absmiddle",
              :border => 0,
              :id => "loader",
              :style =>"display: none;" ) %>
      </label></div>
      <div class="input-container"><%= select :one_click_payslip, :salary_date, @salary_dates.map {|c| [c.salary_date.strftime("%B %Y"),c.salary_date.strftime("%Y-%m-%d")]},
          {:prompt => t('select_month')},
          {:onChange => "#{remote_function(:url => {:action=> "one_click_approve"},
          :with => "'salary_date='+value",:before => "$('loader').show();",
              :success => "$('loader').hide();")}"} %></div>
    </div>

    <div id ="approve"> </div>
  </div>
</div>
