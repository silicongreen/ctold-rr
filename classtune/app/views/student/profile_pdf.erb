<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<%-
#page breaking implemented page
#'available_sections' marks beginning of a pdf page, all the contents within a 'section' class beneath -
#the 'available_section' will be taken to another div with a class 'page' dynamically by the javascript -
#written in layouts/pdf.html.erb. 'page' has style for page-break-after:auto property which makes sure -
#content within class 'section' breaks on each page if its the last content and no space left in current page
#warning: the 'page' div is created directly below html , so style your pdf keeping that in mind.
#point to note: make an easy guess the length of content a page can hold, and make sure each 'section' will -
#not exceed the a page size, like we did below for student_additional_fields, we force a new table to be drawn -
#each time the row count reaches 28, as 28 being the max number of rows an A4 can hold.
#avoid creating deeper nests, make 'section' simpler.
-%>
<% if @student.photo.file? %>
    <% @profile_image = @student.photo.url %>
    <% unless @profile_image.index("RackMultipart").nil? %>	
       <% @profile_image.gsub! '?', '.?' %>	
    <% end %>

  <% else %>
    <% @profile_image = "master_student/profile/default_student.png" %>
  <% end %>
<p class='ab-image'><%= image_tag "#{@profile_image}", :width=>"100" %></p>
<div id="page-yield" class="available_sections">
    <table id="pdf-table" width="100%">
        <tr>
          <td class="align-left-bottom">
          <%= wicked_pdf_image_tag "/"+("#{Rails.root}/"+ (current_school_detail.logo.path||"public/images/application/c.png")),:width=> '65%' %>

          </td>
          <td>
              <b><%=Configuration.get_config_value('InstitutionName'); %></b><br/>
              Dhaka Cantonment<br/>
              Dhaka-1216<br/>
              Phone: #025399 web: sagc.edu.bd
          </td>
          <td class="align-right-bottom">
              <b>Student Profile</b><br/>
              <small>Printing Date: <%= I18n.l(Date.today,:format=>"%d %b %Y") %></small>
          </td>
        </tr>
    </div>
 

  <%
    batchsplit = @student.batch.name.split(" ")
    version = ""
    batch = batchsplit[0]
    unless batchsplit[1].blank?
      version = batchsplit[1]
    end
    unless batchsplit[2].blank?
      version = version+" "+batchsplit[2]
    end
  %>
  <div id="general_info">
  <table id="pdf-table" width="100%">
        <tr class="odd">
          <td class="col-pdf" colspan="4"><%= "Academic Information" %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Student Id" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.admission_no unless @student.admission_no.nil? %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Class Roll" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.class_roll_no unless @student.class_roll_no.nil? %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Student's Name" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.full_name %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Monthly Fee" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= "" %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Program/Class" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.batch.course.course_name unless @student.batch.course.course_name.nil? %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Group" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.batch.course.group unless @student.batch.course.group.nil? %></td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Section" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.batch.course.section_name unless @student.batch.course.section_name.nil? %></td>
          <td class="col-pdf" colspan="1"><%= "Version" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= version %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Session" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.batch.course.session unless @student.batch.course.session.nil? %></td>
          <td class="col-pdf" colspan="1"><%= "Category" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.student_category.name unless @student.student_category.nil? %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Shift" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= batch %></td>
          <td class="col-pdf" colspan="1"><%= "Admission date" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= I18n.l(@student.admission_date,:format=>"%d %b %Y") unless @student.admission_date.nil? %></td>
        </tr>
        <tr class="odd">
          <td class="col-pdf" colspan="4"><%= "Personal Details" %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Date Of Birth" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= I18n.l(@student.date_of_birth,:format=>"%d %b %Y") unless @student.date_of_birth.nil? %></td>
          <td class="col-pdf" colspan="1"><%= "Nick Name" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= "" %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Sex" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= t("#{@student.gender_as_text.downcase}") %></td>
          <td class="col-pdf" colspan="1"><%= "Blood Group" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.blood_group unless @student.blood_group.nil? %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Email" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.email %></td>
          <td class="col-pdf" colspan="1"><%= "Religion" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.religion %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Contact No." %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.phone2 %></td>
          <td class="col-pdf" colspan="1"><%= "Home District" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.student_category.name unless @student.student_category.nil? %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Emergency Contact No" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.sms_number %></td>
          <td class="col-pdf" colspan="1"><%= "Nationality" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= @student.nationality.nationality.nationality unless @student.nationality_id.nil? %></td>
        </tr>
        
        <% unless @student.guardians.empty? %>
          <% g_loop = 0 %>
          <%- @student.guardians.each do |p| -%>
          <% if g_loop == 0 %>
          <tr class="odd">
            <td class="col-pdf" colspan="4"><%= "Father's Details" %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Father's Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.first_name %> <%= p.last_name %></td>
            <td class="col-pdf" colspan="1"><%= "Profession/Occupation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.occupation %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Designation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.designation %></td>
            <td class="col-pdf" colspan="1"><%= "Office Phone" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_phone1 %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Contact No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.mobile_phone %></td>
            <td class="col-pdf" colspan="1"><%= "National Id No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.passport %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Jop Location" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_address_line1 %> <%= p.office_address_line2 %></td>
            <td class="col-pdf" colspan="1"><%= "Annual Income" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.income %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Rank" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
            <td class="col-pdf" colspan="1"><%= "Arms/Service" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Station Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
            <td class="col-pdf" colspan="1"><%= "Retirement Date" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Unit Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
            <td class="col-pdf" colspan="1"><%= "Regiment No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Mission start Date" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
            <td class="col-pdf" colspan="1"><%= "Place Of Mission" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Office Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.organization %></td>
            <td class="col-pdf" colspan="1"><%= "Mission end Date" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Official Address" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_address_line1 %> <%= p.office_address_line2 %></td>
            <td class="col-pdf" colspan="1"><%= "EMail" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.email %></td>
          </tr>
          <% end %>
          <% if g_loop == 1 %>
          <tr class="odd">
            <td class="col-pdf" colspan="4"><%= "Mother's Details" %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Mother's Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.first_name %> <%= p.last_name %></td>
            <td class="col-pdf" colspan="1"><%= "Profession/Occupation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.occupation %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Designation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.designation %></td>
            <td class="col-pdf" colspan="1"><%= "Office Phone" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_phone1 %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Contact No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.mobile_phone %></td>
            <td class="col-pdf" colspan="1"><%= "National Id No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.passport %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Annual Income" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.income %></td>
            <td class="col-pdf" colspan="1"><%= "Email" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.email %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Office Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.organization %></td>
            <td class="col-pdf" colspan="1"><%= "Office Address" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_address_line1 %> <%= p.office_address_line2 %></td>
          </tr>
          <% break %>
          <% end %>
          <% g_loop = g_loop+1 %>
          <% end %>
        <% end %>
          
        <% unless @student.guardians.empty? %>
          <% g_loop = 0 %>
          <%- @student.guardians.each do |p| -%>
          <% if g_loop == 0 %>
          <tr class="odd">
            <td class="col-pdf" colspan="4"><%= "Local Guardian's Details" %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Guardian's Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.first_name %> <%= p.last_name %></td>
            <td class="col-pdf" colspan="1"><%= "Profession/Occupation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.occupation %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Designation" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.designation %></td>
            <td class="col-pdf" colspan="1"><%= "Office Phone" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_phone1 %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Contact No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.mobile_phone %><</td>
            <td class="col-pdf" colspan="1"><%= "National Id No" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.passport %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Annual Income" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.income %></td>
            <td class="col-pdf" colspan="1"><%= "Email" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.email %></td>
          </tr>
          <tr>
            <td class="col-pdf" colspan="1"><%= "Office Name" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.organization %></td>
            <td class="col-pdf" colspan="1"><%= "Office Address" %></td>
            <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;<%= p.office_address_line1 %> <%= p.office_address_line2 %></td>
          </tr>
          <% break %>
          <% end %>
          <% g_loop = g_loop+1 %>
          <% end %>
        <% end %>
        <tr class="odd">
          <td class="col-pdf" colspan="4"><%= "Tc Information" %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Date & Reason" %></td>
          <td class="col-pdf" colspan="1">:&nbsp;&nbsp;&nbsp;</td>
          <td class="col-pdf no-border" colspan="2"></td>
        </tr>
        <tr class="odd">
          <td class="col-pdf" colspan="4"><%= "Address" %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Present" %></td>
          <td class="col-pdf" colspan="3">:&nbsp;&nbsp;&nbsp;<%= @student.address_line1 %></td>
        </tr>
        <tr>
          <td class="col-pdf" colspan="1"><%= "Parmanent" %></td>
          <td class="col-pdf" colspan="3">:&nbsp;&nbsp;&nbsp;<%= @student.address_line2 %></td>
        </tr>
        <% unless @subjects.blank? %>
          <tr class="odd">
            <td class="col-pdf" colspan="4"><%= "Subject Course Information" %></td>
          </tr>
          <% start_loop = 0 %>
         
          <tr>
              <td class="col-pdf" colspan="2">
                <table id="pdf-table" width="100%">
                    <tr class="odd">
                      <td class="col-pdf"><%= "Srl" %></td>
                      <td class="col-pdf"><%= "Code" %></td>
                      <td class="col-pdf"><%= "Subject Course Name" %></td>
                    </tr>
                <% @subjects.each do |subject| %>
                    <tr class="even">
                      <td class="col-pdf"><%= start_loop+1 %></td>
                      <td class="col-pdf"><%= subject.code %></td>
                      <td class="col-pdf"><%= subject.name %></td>
                    </tr>
                    <% start_loop = start_loop+1 %>
                    <% if start_loop > 6 %>
                      <% break %>
                    <% end %>
                <% end %>
                </table>    
              </td>
              <% start_loop = 0 %>
              <td class="col-pdf" colspan="2">
                <% if @subjects.count > 7 %>
                <table id="pdf-table" width="100%">
                    <tr class="odd">
                      <td class="col-pdf"><%= "Srl" %></td>
                      <td class="col-pdf"><%= "Code" %></td>
                      <td class="col-pdf"><%= "Subject Course Name" %></td>
                    </tr>
                <% @subjects.each do |subject| %>
                    <% if start_loop < 7 %>
                       <% start_loop = start_loop+1 %>
                      <% next %>
                    <% end %>
                    <tr class="even">
                      <td class="col-pdf"><%= start_loop+1 %></td>
                      <td class="col-pdf"><%= subject.code %></td>
                      <td class="col-pdf"><%= subject.name %></td>
                    </tr>
                   <% start_loop = start_loop+1 %>
                    
                <% end %>
                </table> 
                <% end %>
              </td>
          </tr>     
        
        <% end %>
        
        
          
  </table>
  <br/>Student mentioned above is quite correct
  <table id="pdf-table" class="evaluation table_99 top-left-center sign_table"  width="99.8%" >

            <tr class="even border-bottom-1-px">
                <td class="col-pdf " width="25%">
                     <br/><br/>
                </td>
                <td class="col-pdf" width="25%">
                    <br/><br/>
                </td> 
                <td class="col-pdf " width="25%">
                    <%= wicked_pdf_image_tag "/"+("#{Rails.root}/"+ ("public/images/school_logo/352/principal-sir-signature-2019.jpg")), :width=>"60%" %>
                </td>
            </tr>
            <tr class="even">

                <td class="col-pdf" width="25%">
                    Student's Signature
                </td>
                <td class="col-pdf " width="25%">
                    Guardian's Signature
                </td>
                <td class="col-pdf" width="25%">
                    Principal
                </td> 

            </tr>

    </table>
  </div>    
  
</div>
<style>
    .ab-image
    {
        width: 100px;
        position: fixed;
        top:100px;
        left: 700px;
    }
    #page-yield
   {
       font-size: 12px;
   }
  div.hor_line
  {
      background: red;
  }
.hor_line2{
    width:200px;
    background: #333333;
    height: 2px;
}
#pdf-table tr td.align-left-bottom
{
    text-align:left;
    vertical-align: bottom;
}
#pdf-table tr td.align-right-bottom
{
    text-align:right;
    vertical-align: bottom;
}
#pdf-table tr td.no-border,table#pdf-table
{
    border: none;
}
#pdf-table tr td
{
    padding: 2px 5px;
    font-size:12px;
    vertical-align: top;
    
}
#pdf-table tr.odd td
{
    padding: 2px 5px;  
    border: 1px solid #000000;
    font-size:12px;
 
}
#pdf-table tr.even td
{
    padding: 2px 5px; 
    border: 1px solid #000000;
    font-size:12px;
   
}

table#pdf-table{
    border-top: none;
    border-collapse:collapse
}
table.sign_table
{
    border:none !important;
}
table.sign_table tr.even td.col-pdf
{
    border:none !important;
    text-align: center !important;
}
table.sign_table tr.border-bottom-1-px td.col-pdf
{
    border-bottom:1px dashed black !important;
}
table.sign_table
{
    border-collapse: separate !important;
    border-spacing: 18px !important;

}

  
</style>   