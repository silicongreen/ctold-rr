<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>



<div id="page-yield" class="available_sections1">
    <div class="page1"></div>
    <div class="section1 row" >
        <center>
            <h4><%= t('attendance_report') %></h4>
            <div class="hor_line"></div>

            <div class="extender"> </div>
        </center>
    </div>

    <%  if @academic_days %>
      <% working_days = @academic_days %>
      <div class="section1 row" >
          <center>
              <div id ="main_info">
                  <div class="info1">
                      <div class="info-left">
                          <h5><%= t('course') %> : <%= @batch.course.full_name %></h5>
                      </div>
                      <div class="info-right">
                          <h5 style="color:black;"><%= @batch.full_name %></h5>
                      </div>
                      <div class="hor_line1"></div>
                  </div>
                  <div class="info1">
                      <div class="info-left">
                          <% if @config.config_value == 'Daily' %>
                            <h5> <%= "#{t('total_no_of_wrkng_days')} = " + @academic_days.to_s %></h5>
                          <% else %>
                            <h5> <%= "#{t('total_no_of_wrkng_hours')} = " + @academic_days.to_s %></h5>
                          <% end %>
                      </div>
                      <div class="info-right">
                          <% if @subject.nil? %>
                            <h5> <%= "#{t('subject')} : " + "#{t('all_subjects')}"  %></h5>
                          <% else %>
                            <h5> <%= "#{t('subject')} : " + @subject.name  %></h5>
                          <% end %>

                      </div>
                  </div>
              </div>
          </center>
      </div>
      <div class="section1 row" id="table-headers" >
          <center>
              <table id="pdf-table" width="99%">
                  <tr class="table-header">
                      <td class="col-pdf1"><%= "Roll" %></td>
                      <td class="col-pdf1"><%= t('name') %></td>
                      <td class="col-pdf1"><%= t('adm_no') %></td>
                      <td class="col-pdf1">
                          Present
                      </td>
                      <td class="col-pdf1">
                          Late
                      </td>
                      <td class="col-pdf1">
                          Absent
                      </td>
                      <td class="col-pdf1">
                          Leave
                      </td>
                      <td class="col-pdf1"><%= t('total') %></td>
                      <td class="col-pdf1"><%= t('percentage') %></td>
                      <td class="col-pdf1"><%= "Mobile" %></td>
                  </tr>
                  <% extender = 0 %>
                  <% std_count = 0 %>
                  <% @students.each_with_index do |student,i| %>
                    <%  std_count = std_count+1; %>
                    <% if std_count>56 && extender ==0 %>
                      <% std_count = 0 %>
                      <% extender = 1 %>
                      <tr class="page-break">
                          <td colspan="100">&nbsp;</td>
                      </tr>
                      <tr class="header-td">
                          <td colspan="100">

                      <center>
                          <div id ="main_info">
                              <div class="info1">
                                  <div class="info-left">
                                      <h5><%= t('course') %> : <%= @batch.course.full_name %></h5>
                                  </div>
                                  <div class="info-right">
                                      <h5 style="color:black;"><%= @batch.full_name %></h5>
                                  </div>
                                  <div class="hor_line1"></div>
                              </div>
                              <div class="info1">
                                  <div class="info-left">
                                      <% if @config.config_value == 'Daily' %>
                                        <h5> <%= "#{t('total_no_of_wrkng_days')} = " + @academic_days.to_s %></h5>
                                      <% else %>
                                        <h5> <%= "#{t('total_no_of_wrkng_hours')} = " + @academic_days.to_s %></h5>
                                      <% end %>
                                  </div>
                                  <div class="info-right">
                                      <% if @subject.nil? %>
                                        <h5> <%= "#{t('subject')} : " + "#{t('all_subjects')}"  %></h5>
                                      <% else %>
                                        <h5> <%= "#{t('subject')} : " + @subject.name  %></h5>
                                      <% end %>

                                  </div>
                              </div>
                          </div>
                      </center>

                      </td>
                      </tr>
                      <tr class="table-header">
                          <td class="col-pdf1"><%= "Roll" %></td>
                          <td class="col-pdf1"><%= t('name') %></td>
                          <td class="col-pdf1"><%= t('adm_no') %></td>
                          <td class="col-pdf1">
                              Present
                          </td>
                          <td class="col-pdf1">
                              Late
                          </td>
                          <td class="col-pdf1">
                              Absent
                          </td>
                          <td class="col-pdf1">
                              Leave
                          </td>
                          <td class="col-pdf1"><%= t('total') %></td>
                          <td class="col-pdf1"><%= t('percentage') %></td>
                          <td class="col-pdf1"><%= "Mobile" %></td>
                      </tr>
                    <% elsif std_count>63 && extender ==1 %>
                      <% std_count = 0 %>
                      <% extender = 1 %>
                      <tr class="page-break">
                          <td colspan="100">&nbsp;</td>
                      </tr>
                      <tr class="table-header">
                          <td class="col-pdf1"><%= "Roll" %></td>
                          <td class="col-pdf1"><%= t('name') %></td>
                          <td class="col-pdf1"><%= t('adm_no') %></td>
                          <td class="col-pdf1">
                              Present
                          </td>
                          <td class="col-pdf1">
                              Late
                          </td>
                          <td class="col-pdf1">
                              Absent
                          </td>
                          <td class="col-pdf1">
                              Leave
                          </td>
                          <td class="col-pdf1"><%= t('total') %></td>
                          <td class="col-pdf1"><%= t('percentage') %></td>
                          <td class="col-pdf1"><%= "Mobile" %></td>
                      </tr>
                    <% end %>
                    <% c =cycle('even','odd ') %>
                    <tr class="table-header">
                        <td class="col-pdf1"><%= student.class_roll_no %></td>
                        <td class="col-pdf1 no-warp"><%= student.full_name %></td>
                        <td class="col-pdf1"><%= student.admission_no %></td>
                        <td class="col-pdf1"> <%= @leaves[student.id]['present'] %></td>
                        <td class="col-pdf1"> <%= @leaves[student.id]['late'] %></td>
                        <td class="col-pdf1"> <%= @leaves[student.id]['absent'] %></td>
                        <td class="col-pdf1"> <%= @leaves[student.id]['on_leave'] %></td>
                        <td class="col-pdf1"><%= @leaves[student.id]['total'] %></td>
                        <td class="col-pdf1"><%= @leaves[student.id]['percent'].round(2) unless @leaves[student.id]['percent'].nil? %></td>
                        <td class="col-pdf1"><%= student.sms_number %></td>
                    </tr>
                  <% end %>  
              </table>
          </center>
      </div>


    <%  else %>
      <div class="section1 row" >
          <center>
              <div class="no-data"><%= t('no_report_for_given_period') %></div>
          </center>
      </div>
    <% end %>


</div>
<style>
    .no-warp
    {
        white-space: nowrap;
        text-align: left !important;
    }
    table#pdf-table tr.table-header td
    {
        padding: 2px !important;
        font-size: 11px !important;
    }
    .page-break td{
        height: 50px;
        border: 1px solid #fff;
        border-bottom: 1px solid #ADACAB;
    }
</style>
