<%-# Champs21
#Copyright 2010 teamCreative Private Limited
#
#This product includes software developed at
#Project Champs21 - http://www.champs21.com/
#
#Licensed under the Apache License, Version 2.0 (the "License");
#you may not use this file except in compliance with the License.
#You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License. -%>

<link rel="stylesheet" href="/stylesheets/employee/profile.css">
<div id="content-header">
<%= show_header_icon %>
  <h1><%= t('employee_attendance_time') %></h1>
<div class='header-sep'>|</div>
<div class='sub-header'><%= t('employee_attendance_time_desc') %></div>


</div>
<div id="page-yield">
  <div id="message"></div>  
  <h2><%= t('employee_attendance_time') %></h2>
  <% remote_form_for :employee_setting,:url=>{:action=>'employee_setting_mass_update', :id=>@employee.id} do |c| %>
      
        <% unless @employee_settings.nil? %>
          <% @weekday_set = @employee_settings.weekdays.split(",") %>

          <% @start_hour = @employee_settings.start_time.strftime("%H") %>
          <% @start_min = @employee_settings.start_time.strftime("%M") %>
          <% @office_hour = @employee_settings.office_hours.strftime("%H") %>
          <% @office_min = @employee_settings.office_hours.strftime("%M") %>
        <% else %>
          <% @start_hour = "8" %>
          <% @start_min = "0" %>
          <% @office_hour = "8" %>
          <% @office_min = "0" %>
          <% @weekday_set = ["0","1","2","3","4","6"] %>
        <% end %> 
        <table width="700">

          <tr class="odd left">
              <td><%= "Office Time By" %><span class="required">*</span></td>
              <td class="right">
                <%= select_tag "attendance_type_options",options_for_select(["-- Select --", "Department","Position"],""),:onChange => "#{remote_function(:url => {:action => "list_options"},
                :with => "'option_type='+ value",
                :before => "Element.show('loader1')",
                :success => "Element.hide('loader1')"
                )}" %>
                <%= image_tag("loader.gif",
                :align => "absmiddle",
                :border => 0,
                :id => "loader1",
                :style =>"display: none;" ) %>  
              </td>
          </tr>  
          <tr id="options-select" class="odd left"></tr>
          <tr class="odd left">
              <td><%= t('start_time') %><span class="required">*</span></td>
              <td class="right">
                <%= time_select :employee_setting, :start_time, {:minute_step => 5,:default => {:hour => @start_hour, :minute => @start_min}} %>
              </td>
          </tr>
          <tr class="odd left">
              <td><%= 'Office Hours' %><span class="required">*</span></td>
              <td class="right">
                <%= time_select :employee_setting, :office_hours, {:minute_step => 5,:default => {:hour => @office_hour, :minute => @office_min}} %>
              </td>
          </tr>
          <tr class="odd left">
              <td><%= 'Weekdays' %><span class="required">*</span></td>
              <td class="right">
                  <ul class="nav" style="width: 100%;">

                    <% @default_weekdays.each_pair do |key,value| %>
                      <li style="display: inline-block; width: 25%; height: 30px;">
                        <%= check_box_tag "weekdays[]", key, @weekday_set.include?(key.to_s), :class => "flat" %>&nbsp;&nbsp;<%= t(value.downcase) %>
                      </li>
                    <% end %>
                </ul>
              </td>
          </tr>
          
        </table>   
      

        
      <div  style="margin:0px 0px 10px 0px; float:left;">
          <%=submit_tag("â–º #{t('save')}&nbsp;", :class=>"user_button") %>
      </div>


         
  <%end%>


</div>
